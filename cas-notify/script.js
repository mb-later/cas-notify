window.addEventListener("message", function (event) {
  console.log("message" + event.data.action);
  if (event.data.action) {
    console.log("data.action true");
    showNotify(
      event.data.action,
      event.data.time,
      event.data.sound,
      event.data.message
    );
  }
});

const values = {
  success: {
    type: "success",
    header: "SUCCESS",
    svg: ` <svg width="50" height="50" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 0C10.4288 0 7.91543 0.762437 5.77759 2.1909C3.63975 3.61935 1.97351 5.64968 0.989572 8.02512C0.0056327 10.4006 -0.251811 13.0144 0.249797 15.5362C0.751405 18.0579 1.98953 20.3743 3.80762 22.1924C5.6257 24.0105 7.94208 25.2486 10.4638 25.7502C12.9856 26.2518 15.5995 25.9944 17.9749 25.0104C20.3503 24.0265 22.3807 22.3603 23.8091 20.2224C25.2376 18.0846 26 15.5712 26 13C25.9964 9.5533 24.6256 6.24882 22.1884 3.81163C19.7512 1.37445 16.4467 0.00363977 13 0ZM18.7075 10.7075L11.7075 17.7075C11.6146 17.8005 11.5043 17.8742 11.3829 17.9246C11.2615 17.9749 11.1314 18.0008 11 18.0008C10.8686 18.0008 10.7385 17.9749 10.6171 17.9246C10.4957 17.8742 10.3854 17.8005 10.2925 17.7075L7.29251 14.7075C7.10486 14.5199 6.99945 14.2654 6.99945 14C6.99945 13.7346 7.10486 13.4801 7.29251 13.2925C7.48015 13.1049 7.73464 12.9994 8.00001 12.9994C8.26537 12.9994 8.51987 13.1049 8.70751 13.2925L11 15.5863L17.2925 9.2925C17.3854 9.19959 17.4957 9.12589 17.6171 9.07561C17.7385 9.02532 17.8686 8.99944 18 8.99944C18.1314 8.99944 18.2615 9.02532 18.3829 9.07561C18.5043 9.12589 18.6146 9.19959 18.7075 9.2925C18.8004 9.38541 18.8741 9.49571 18.9244 9.6171C18.9747 9.7385 19.0006 9.8686 19.0006 10C19.0006 10.1314 18.9747 10.2615 18.9244 10.3829C18.8741 10.5043 18.8004 10.6146 18.7075 10.7075Z" fill="#41EB52"/></svg>`,
  },
  error: {
    type: "error",
    header: "ERROR",
    svg: `<svg width="50" height="50" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8978 0.350136C9.57458 0.350136 7.30353 1.03905 5.37184 2.32977C3.44015 3.62048 1.93458 5.45503 1.04552 7.60141C0.156457 9.74779 -0.076162 12.1096 0.377077 14.3882C0.830316 16.6668 1.94906 18.7598 3.59183 20.4026C5.23459 22.0453 7.32761 23.1641 9.6062 23.6173C11.8848 24.0705 14.2466 23.8379 16.393 22.9489C18.5394 22.0598 20.3739 20.5542 21.6646 18.6225C22.9553 16.6909 23.6443 14.4198 23.6443 12.0966C23.641 8.98223 22.4023 5.99639 20.2002 3.79422C17.998 1.59205 15.0122 0.353425 11.8978 0.350136ZM11.8978 19.3252C11.6297 19.3252 11.3677 19.2457 11.1448 19.0967C10.9219 18.9478 10.7482 18.7361 10.6456 18.4885C10.543 18.2408 10.5162 17.9683 10.5685 17.7054C10.6208 17.4425 10.7499 17.201 10.9394 17.0114C11.129 16.8219 11.3705 16.6928 11.6334 16.6405C11.8963 16.5882 12.1688 16.615 12.4165 16.7176C12.6641 16.8202 12.8758 16.9939 13.0248 17.2168C13.1737 17.4397 13.2532 17.7017 13.2532 17.9698C13.2532 18.3293 13.1104 18.674 12.8562 18.9282C12.602 19.1824 12.2573 19.3252 11.8978 19.3252ZM12.8014 13.8224V13.9037C12.8014 14.1434 12.7062 14.3732 12.5367 14.5426C12.3673 14.7121 12.1375 14.8073 11.8978 14.8073C11.6582 14.8073 11.4283 14.7121 11.2589 14.5426C11.0894 14.3732 10.9942 14.1434 10.9942 13.9037V13.0001C10.9942 12.7605 11.0894 12.5307 11.2589 12.3612C11.4283 12.1918 11.6582 12.0966 11.8978 12.0966C13.3921 12.0966 14.6085 11.0801 14.6085 9.83764C14.6085 8.59523 13.3921 7.57871 11.8978 7.57871C10.4035 7.57871 9.18709 8.59523 9.18709 9.83764V10.2894C9.18709 10.5291 9.0919 10.7589 8.92244 10.9284C8.75299 11.0978 8.52316 11.193 8.28352 11.193C8.04388 11.193 7.81405 11.0978 7.6446 10.9284C7.47515 10.7589 7.37995 10.5291 7.37995 10.2894V9.83764C7.37995 7.59566 9.40621 5.77157 11.8978 5.77157C14.3894 5.77157 16.4157 7.59566 16.4157 9.83764C16.4157 11.8007 14.8615 13.444 12.8014 13.8224Z" fill="#EB4341"/></svg>`,
  },
  warn: {
    type: "warn",
    header: "WARNING",
    svg: `<svg width="50" height="50" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.4378 0C9.97782 0 7.5731 0.729463 5.52772 2.09614C3.48234 3.46282 1.88816 5.40534 0.946775 7.67804C0.00538907 9.95075 -0.24092 12.4516 0.238994 14.8643C0.718908 17.277 1.90349 19.4932 3.64295 21.2326C5.3824 22.9721 7.5986 24.1566 10.0113 24.6366C12.424 25.1165 14.9248 24.8702 17.1975 23.9288C19.4702 22.9874 21.4127 21.3932 22.7794 19.3478C24.1461 17.3025 24.8756 14.8977 24.8756 12.4378C24.8721 9.14014 23.5605 5.97857 21.2288 3.64679C18.897 1.31501 15.7354 0.00348236 12.4378 0ZM11.9594 5.74051C12.2432 5.74051 12.5207 5.82468 12.7567 5.98237C12.9927 6.14007 13.1767 6.3642 13.2853 6.62644C13.3939 6.88868 13.4223 7.17723 13.367 7.45562C13.3116 7.73401 13.1749 7.98972 12.9742 8.19043C12.7735 8.39113 12.5178 8.52782 12.2394 8.58319C11.961 8.63857 11.6724 8.61015 11.4102 8.50152C11.148 8.3929 10.9238 8.20896 10.7661 7.97295C10.6084 7.73695 10.5243 7.45948 10.5243 7.17564C10.5243 6.79502 10.6755 6.42999 10.9446 6.16085C11.2138 5.89171 11.5788 5.74051 11.9594 5.74051ZM13.3945 19.135C12.887 19.135 12.4003 18.9334 12.0415 18.5746C11.6826 18.2157 11.481 17.729 11.481 17.2215V12.4378C11.2273 12.4378 10.9839 12.337 10.8045 12.1575C10.6251 11.9781 10.5243 11.7348 10.5243 11.481C10.5243 11.2273 10.6251 10.9839 10.8045 10.8045C10.9839 10.6251 11.2273 10.5243 11.481 10.5243C11.9885 10.5243 12.4752 10.7259 12.8341 11.0847C13.1929 11.4436 13.3945 11.9303 13.3945 12.4378V17.2215C13.6483 17.2215 13.8916 17.3223 14.0711 17.5018C14.2505 17.6812 14.3513 17.9245 14.3513 18.1783C14.3513 18.432 14.2505 18.6754 14.0711 18.8548C13.8916 19.0342 13.6483 19.135 13.3945 19.135Z" fill="#FEC422"/></svg>`,
  },
  info: {
    type: "info",
    header: "INFO",
    svg: ` <svg width="50" height="50" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23.1468 9.57594C22.731 9.14137 22.3008 8.69356 22.1387 8.29981C21.9887 7.93914 21.9799 7.34133 21.971 6.76227C21.9545 5.68578 21.9369 4.4659 21.0887 3.61772C20.2405 2.76954 19.0206 2.7519 17.9441 2.73535C17.3651 2.72653 16.7673 2.7177 16.4066 2.5677C16.0139 2.40556 15.565 1.97541 15.1305 1.55959C14.3694 0.828326 13.5047 0 12.3532 0C11.2017 0 10.3381 0.828326 9.57594 1.55959C9.14137 1.97541 8.69356 2.40556 8.29981 2.5677C7.94134 2.7177 7.34133 2.72653 6.76227 2.73535C5.68578 2.7519 4.4659 2.76954 3.61772 3.61772C2.76954 4.4659 2.75741 5.68578 2.73535 6.76227C2.72653 7.34133 2.7177 7.93914 2.5677 8.29981C2.40556 8.69246 1.97541 9.14137 1.55959 9.57594C0.828326 10.337 0 11.2017 0 12.3532C0 13.5047 0.828326 14.3683 1.55959 15.1305C1.97541 15.565 2.40556 16.0128 2.5677 16.4066C2.7177 16.7673 2.72653 17.3651 2.73535 17.9441C2.7519 19.0206 2.76954 20.2405 3.61772 21.0887C4.4659 21.9369 5.68578 21.9545 6.76227 21.971C7.34133 21.9799 7.93914 21.9887 8.29981 22.1387C8.69246 22.3008 9.14137 22.731 9.57594 23.1468C10.337 23.8781 11.2017 24.7064 12.3532 24.7064C13.5047 24.7064 14.3683 23.8781 15.1305 23.1468C15.565 22.731 16.0128 22.3008 16.4066 22.1387C16.7673 21.9887 17.3651 21.9799 17.9441 21.971C19.0206 21.9545 20.2405 21.9369 21.0887 21.0887C21.9369 20.2405 21.9545 19.0206 21.971 17.9441C21.9799 17.3651 21.9887 16.7673 22.1387 16.4066C22.3008 16.0139 22.731 15.565 23.1468 15.1305C23.8781 14.3694 24.7064 13.5047 24.7064 12.3532C24.7064 11.2017 23.8781 10.3381 23.1468 9.57594ZM11.4708 7.05897C11.4708 6.82495 11.5638 6.60052 11.7293 6.43504C11.8947 6.26956 12.1192 6.1766 12.3532 6.1766C12.5872 6.1766 12.8117 6.26956 12.9771 6.43504C13.1426 6.60052 13.2356 6.82495 13.2356 7.05897V13.2356C13.2356 13.4696 13.1426 13.694 12.9771 13.8595C12.8117 14.025 12.5872 14.1179 12.3532 14.1179C12.1192 14.1179 11.8947 14.025 11.7293 13.8595C11.5638 13.694 11.4708 13.4696 11.4708 13.2356V7.05897ZM12.3532 18.5298C12.0914 18.5298 11.8355 18.4522 11.6179 18.3067C11.4002 18.1613 11.2306 17.9546 11.1304 17.7127C11.0302 17.4709 11.004 17.2048 11.0551 16.948C11.1061 16.6913 11.2322 16.4554 11.4173 16.2703C11.6024 16.0852 11.8382 15.9592 12.095 15.9081C12.3517 15.857 12.6179 15.8833 12.8597 15.9834C13.1016 16.0836 13.3083 16.2533 13.4537 16.4709C13.5991 16.6886 13.6768 16.9445 13.6768 17.2062C13.6768 17.5573 13.5373 17.8939 13.2891 18.1421C13.0409 18.3904 12.7042 18.5298 12.3532 18.5298Z" fill="#2382FD"/></svg>`,
  },
};

let notifyBoxes = []; 

showNotify = function (type, time, playSound, message) {
  var body = $("body");

  if (type != null && values[type]) {
    var notify = `
      <div class="notifyBox ${type}">
          <div class="svgBox">
              ${values[type].svg}
          </div>
         
          <div class="notifyTexts">
              <h1 class="notifyHeader ${type}">
                ${values[type].header}
              </h1>
              <p class="notifyDesc">
                  ${message}
              </p>
          </div>
      </div>
    `;
    const notifyElement = $(notify); 
    body.append(notifyElement);

    if (playSound) {
      const sound = new Audio("sound.mp3");
      sound.volume = 0.6;
      sound.play();
    }

    
    setTimeout(function () {
      removeNotifyBox(notifyElement)
    }, time);

    notifyBoxes.push(notifyElement); 
  }
};

removeNotifyBox = function (notifyElement) {
  notifyElement.addClass("removeNotifyBox");
  setTimeout(function () {
    notifyElement.remove();
  }, 500);
};
